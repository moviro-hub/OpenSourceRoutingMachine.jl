"""
Test fixtures and helpers for Route module tests.
"""
module Fixtures

using ..TestData
using OpenSourceRoutingMachine
using OpenSourceRoutingMachine.Enums: Algorithm

# Known coordinates in Hamburg for testing
const HAMBURG_CITY_CENTER = (9.9937f0, 53.5511f0)  # Rathaus (longitude, latitude)
const HAMBURG_AIRPORT = (9.9882f0, 53.6304f0)      # Hamburg Airport (HAM)
const HAMBURG_PORT = (9.9667f0, 53.5417f0)         # Port area
const HAMBURG_ALTONA = (9.9352f0, 53.5528f0)       # Altona station

"""
    get_test_config() -> OSRMConfig

Get an OSRMConfig instance using the test data.
"""
const _OSRM_CONFIG = let base = TestData.get_test_osrm_path()
    cfg = OSRMConfig(base)
    OpenSourceRoutingMachine.Config.set_algorithm!(cfg, Algorithm.mld)
    cfg
end

const _OSRM_INSTANCE = OSRM(_OSRM_CONFIG)

function get_test_config()
    return _OSRM_CONFIG
end

function get_test_osrm()
    return _OSRM_INSTANCE
end

"""
    hamburg_coordinates() -> Vector{Tuple{Float32, Float32}}

Get a list of known Hamburg coordinates for testing.
"""
function hamburg_coordinates()
    return [
        HAMBURG_CITY_CENTER,
        HAMBURG_AIRPORT,
        HAMBURG_PORT,
        HAMBURG_ALTONA,
    ]
end

# Match test coordinates (generated by generate_match_test_data.jl)
# These coordinates are validated to produce successful matches
const MATCH_TEST_COORDS_CITY_CENTER_TO_AIRPORT = [
    (9.993674f0, 53.551113f0),
    (9.994772f0, 53.551086f0),
    (9.99587f0, 53.551056f0),
    (9.996967f0, 53.55103f0),
    (9.998065f0, 53.551f0),
    (9.999163f0, 53.550972f0),
    (10.00026f0, 53.55094f0),
    (10.001358f0, 53.550915f0),
    (10.002455f0, 53.550888f0),
    (10.003552f0, 53.550858f0),
    (10.00465f0, 53.55083f0),
    (10.005748f0, 53.5508f0),
    (10.006845f0, 53.550774f0),
    (10.007943f0, 53.550743f0),
    (10.009041f0, 53.550716f0),
]

const MATCH_TEST_COORDS_CITY_CENTER_TO_PORT = [
    (9.993674f0, 53.551113f0),
    (9.994772f0, 53.551086f0),
    (9.99587f0, 53.551056f0),
    (9.996967f0, 53.55103f0),
    (9.998065f0, 53.551f0),
    (9.999163f0, 53.550972f0),
    (10.00026f0, 53.55094f0),
    (10.001358f0, 53.550915f0),
    (10.002455f0, 53.550888f0),
    (10.003552f0, 53.550858f0),
    (10.00465f0, 53.55083f0),
    (10.005748f0, 53.5508f0),
    (10.006845f0, 53.550774f0),
    (10.007943f0, 53.550743f0),
    (10.009041f0, 53.550716f0),
]

const MATCH_TEST_COORDS_CITY_CENTER_TO_ALTONA = [
    (9.993674f0, 53.551113f0),
    (9.994772f0, 53.551086f0),
    (9.99587f0, 53.551056f0),
    (9.996967f0, 53.55103f0),
    (9.998065f0, 53.551f0),
    (9.999163f0, 53.550972f0),
    (10.00026f0, 53.55094f0),
    (10.001358f0, 53.550915f0),
    (10.002455f0, 53.550888f0),
    (10.003552f0, 53.550858f0),
    (10.00465f0, 53.55083f0),
    (10.005748f0, 53.5508f0),
    (10.006845f0, 53.550774f0),
    (10.007943f0, 53.550743f0),
    (10.009041f0, 53.550716f0),
]

const MATCH_TEST_COORDS_MULTI_SEGMENT = [
    (9.993674f0, 53.551113f0),
    (9.994772f0, 53.551086f0),
    (9.99587f0, 53.551056f0),
    (9.996967f0, 53.55103f0),
    (9.998065f0, 53.551f0),
    (9.999163f0, 53.550972f0),
    (10.00026f0, 53.55094f0),
    (10.001358f0, 53.550915f0),
    (10.002455f0, 53.550888f0),
    (10.003552f0, 53.550858f0),
    (10.00465f0, 53.55083f0),
    (10.005748f0, 53.5508f0),
    (10.006845f0, 53.550774f0),
    (10.007943f0, 53.550743f0),
    (10.009041f0, 53.550716f0),
]

end # module
